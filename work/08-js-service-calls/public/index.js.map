{"version":3,"file":"index.js","mappings":"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","sources":["webpack://08-js-service-calls/./src/render.js","webpack://08-js-service-calls/./src/services.js","webpack://08-js-service-calls/./src/state.js","webpack://08-js-service-calls/webpack/bootstrap","webpack://08-js-service-calls/webpack/runtime/define property getters","webpack://08-js-service-calls/webpack/runtime/hasOwnProperty shorthand","webpack://08-js-service-calls/webpack/runtime/make namespace object","webpack://08-js-service-calls/./src/index.js"],"sourcesContent":["import { getState } from './state.js';\n\nexport function render() {\n    const { username, storedWord, error } = getState();\n    const app = document.getElementById('app');\n    app.innerHTML = `\n      ${username ? `\n        <h1>Welcome, ${username}!</h1>\n        <p>Your stored word is: ${storedWord}</p>\n        <form id=\"update-word-form\">\n          <input type=\"text\" name=\"word\" value=\"${storedWord}\">\n          <button type=\"submit\">Update Word</button>\n        </form>\n        <button id=\"logout\">Logout</button>\n      ` : `\n        <h1>Login</h1>\n        ${error ? `<p class=\"error\">${error}</p>` : ''}\n        <form id=\"login-form\">\n          <input type=\"text\" name=\"username\" placeholder=\"Username\">\n          <button type=\"submit\">Login</button>\n        </form>\n      `}\n    `;\n  }","export function fetchLogin(username) {\n  return fetch('/api/session', {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json',\n    },\n    body: JSON.stringify({ username }),\n  })\n    .catch(() => Promise.reject({ error: 'network-error' }))\n    .then((response) => {\n      if (!response.ok) {\n        return response.json().then((err) => Promise.reject(err));\n      }\n      return response.json();\n    });\n}\n\nexport function fetchLogout() {\n  return fetch('/api/session', {\n    method: 'DELETE',\n  })\n  .catch(() => Promise.reject({ error: 'network-error' }))\n  .then(response => {\n    if (!response.ok) {\n      return response.json().then(err => Promise.reject(err));\n    }\n    return response.json();\n  });\n}\n\nexport function fetchWord() {\n  return fetch('/api/word')\n  .catch(() => Promise.reject({ error: 'network-error' }))\n  .then(response => {\n    if (!response.ok) {\n      return response.json().then(err => Promise.reject(err));\n    }\n    return response.json();\n  });\n}\n\nexport function updateWord(word) {\n  return fetch('/api/word', {\n    method: 'PUT',\n    headers: {\n      'content-type': 'application/json',\n    },\n    body: JSON.stringify({ word }),\n  })\n  .catch(() => Promise.reject({ error: 'network-error' }))\n  .then(response => {\n    if (!response.ok) {\n      return response.json().then(err => Promise.reject(err));\n    }\n    return response.json();\n  });\n}","let state = {\n    username: '',\n    storedWord: '',\n    error: '',\n  };\n  \n  export function getState() {\n    return state;\n  }\n  \n  export function setState(newState) {\n    state = { ...state, ...newState };\n    render();\n  }","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { setState, getState } from './state.js';\nimport { render } from './render.js';\nimport { fetchLogin, fetchLogout, fetchWord, updateWord } from './services.js';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  render();\n  fetchWord().then(data => {\n    setState({ username: data.username, storedWord: data.storedWord });\n  }).catch(() => {\n    setState({ username: '', storedWord: '' });\n  });\n\n  document.getElementById('app').addEventListener('submit', (e) => {\n    e.preventDefault(); // Prevent the form from submitting the traditional way\n  \n    if (e.target.id === 'login-form') {\n      const username = e.target.username.value; // Get the username from the form\n  \n      // Call the login service\n      fetchLogin(username)\n        .then((data) => {\n          // On successful login, update the state and fetch the stored word\n          setState({ username: data.username, error: '' });\n          return fetchWord();\n        })\n        .then((data) => {\n          // Update the state with the stored word\n          setState({ storedWord: data.storedWord });\n        })\n        .catch((err) => {\n          // Handle errors\n          setState({\n            error:\n              err.error === 'auth-insufficient'\n                ? 'Invalid username or password'\n                : 'Username is required',\n          });\n        });\n    }\n  });\n\n  document.getElementById('app').addEventListener('click', (e) => {\n    if (e.target.id === 'logout') {\n      fetchLogout().then(() => {\n        setState({ username: '', storedWord: '', error: '' });\n      }).catch(err => {\n        setState({ error: err.error });\n      });\n    }\n  });\n});"],"names":["getState","render","_getState","username","storedWord","error","app","document","getElementById","innerHTML","concat","fetchLogin","fetch","method","headers","body","JSON","stringify","Promise","reject","then","response","ok","json","err","fetchLogout","fetchWord","updateWord","word","state","setState","newState","_objectSpread","addEventListener","data","e","preventDefault","target","id","value"],"sourceRoot":""}